<h2 class="mb-4">База пользователей</h2>

<table class="table table-striped">
  <thead>
    <tr>
      <th>ID</th>
      <th>Имя</th>
      <th>Логин</th>
      <th>Роль</th>
      <th>Активных заявок</th>
      <th>Действия</th>
    </tr>
  </thead>
  <tbody>
    {{#each users}}
    <tr>
      <td>{{this.id}}</td>
      <td>{{this.name}}</td>
      <td>{{this.login}}</td>
      <td>{{this.role}}</td>
      <td>{{this.request_count}}</td>
      <td>
        <a href="/users/{{this.id}}" class="btn btn-sm btn-info">Заказы</a>
        <a href="#" class="btn btn-sm btn-warning">Редактировать</a>
        <form action="/users/{{this.id}}/delete" method="POST" class="d-inline">
          <button type="submit" class="btn btn-sm btn-danger delete-user">Удалить</button>
        </form>
      </td>
    </tr>
    {{/each}}
  </tbody>
  
<script>
// Подтверждение удаления пользователя
document.querySelectorAll('.delete-user').forEach(button => {
  button.addEventListener('click', function(e) {
    if (!confirm('Вы уверены, что хотите удалить этого пользователя?')) {
      e.preventDefault();
    }
  });
});
</script>